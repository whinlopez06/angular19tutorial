<div class="row">
    <div class="col-8 text-center">
        <h2>POST API Integration using Template Form</h2>
    </div>
    <!-- <div class="col-4">
        <button class="btn btn-success" (click)="getAllCars()">Load Cars</button>
    </div> -->
</div>
<div class="row">
    <div class="col-12 text-center">
        <app-tabs [tabList]="['Car List', 'New Card Form']" (onTabClicked)="onTabChange($event)"></app-tabs>
    </div>
</div>

<input type="text" #textCity placeholder="Enter City" >
<button (click)="readCity()">Read Value</button>

<div class="row pt-2">
    @if(currentTab == 'Car List') {
        <div class="col-12 text-center">
            <div class="card">
                <div class="card-header bg-warning">
                    <h5>Car List</h5>
                </div>
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Row No</th>
                                <th>Brand</th>
                                <th>Model</th>
                                <th>Req No</th>
                                <th>Daily Rate</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (item of carList; track $index) {
                                <tr>
                                    <td>{{$index+1}}</td>
                                    <td>{{item.brand}}</td>
                                    <td>{{item.model}}</td>
                                    <td>{{item.regNo}}</td>
                                    <td>{{item.dailyRate}}</td>
                                    <td>
                                        <button class="btn btn-success" (click)="onEditCar(item)">Edit</button>
                                        <button class="btn btn-danger" (click)="onDeletecar(item.carId)">Delete</button>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }

    @else {
        <div class="col-12 text-center">
            <div class="card">
                <div class="card-header bg-warning">
                    <h5>Create New Car</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6 mt-2">
                            <label>Reg No</label>
                            <input type="text" [(ngModel)]="carObject.regNo" class="form-control" placeholder="Enter car image url" />
                        </div>
                        <div class="col-6 mt-2">
                            <label>Brand</label>
                            <input type="text" [(ngModel)]="carObject.brand" class="form-control" placeholder="Enter brand name" />
                        </div>
                        <div class="col-6 mt-2">
                            <label>Model</label>
                            <input type="text" [(ngModel)]="carObject.model" class="form-control" placeholder="Enter model name" />
                        </div>
                        <div class="col-6 mt-2">
                            <label>Year</label>
                            <input type="text" [(ngModel)]="carObject.year"  class="form-control" placeholder="Enter year" />
                        </div>
                        <div class="col-6 mt-2">
                            <label>Color</label>
                            <input type="text" [(ngModel)]="carObject.color"  class="form-control" placeholder="Enter color" />
                        </div>
                        <div class="col-6 mt-2">
                            <label>Daily Rate</label>
                            <input type="text" [(ngModel)]="carObject.dailyRate"  class="form-control" placeholder="Enter daily rate" />
                        </div>
                        <div class="col-6 mt-2">
                            <label>Car Image URL</label>
                            <input type="text" [(ngModel)]="carObject.carImage" class="form-control" placeholder="Enter car image url" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 mt-2 text-center">
                            <button class="btn btn-secondary m-2">Reset Form</button>
                            @if(carObject.carId == 0) {
                                <button class="btn btn-success m-2" (click)="onSaveCar()">Save Car</button>
                            } @else {
                                <button class="btn btn-warning m-2" (click)="onSaveEditCar()">Update Car</button>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

</div>